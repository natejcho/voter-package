{"ast":null,"code":"import db from '../../lib/db';\n\nconst getComment = async (req, res) => {\n  const {\n    post_id\n  } = req.query;\n  console.log('getting comments for ' + post_id);\n\n  try {\n    const doc = await db.collection('comments').doc(post_id).get();\n\n    if (!doc.exists) {\n      await db.collection('comments').doc(post_id).set({\n        children: [],\n        value: '',\n        parentId: null\n      }, {\n        merge: true\n      });\n      await getComment(req, res);\n    } else {\n      res.status(200).json({\n        data: doc.data()\n      });\n    }\n  } catch (error) {\n    console.log('Error getting comments', error);\n    res.json({\n      error\n    });\n  } // db.collection('comments').doc(id).get()\n  //   .then((doc) => {\n  // })\n  // .catch((error) => {\n  //   console.log('Error getting comments', error);\n  //   res.json({ error })\n  // });\n\n};\n\nexport default getComment;","map":{"version":3,"sources":["/Users/nathanielcho/Projects/voter-package/pages/api/comments.js"],"names":["db","getComment","req","res","post_id","query","console","log","doc","collection","get","exists","set","children","value","parentId","merge","status","json","data","error"],"mappings":"AAAA,OAAOA,EAAP,MAAe,cAAf;;AAEA,MAAMC,UAAU,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACrC,QAAM;AAAEC,IAAAA;AAAF,MAAcF,GAAG,CAACG,KAAxB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,0BAA0BH,OAAtC;;AACA,MAAI;AACF,UAAMI,GAAG,GAAG,MAAMR,EAAE,CAACS,UAAH,CAAc,UAAd,EAA0BD,GAA1B,CAA8BJ,OAA9B,EAAuCM,GAAvC,EAAlB;;AACA,QAAI,CAACF,GAAG,CAACG,MAAT,EAAiB;AACf,YAAMX,EAAE,CAACS,UAAH,CAAc,UAAd,EAA0BD,GAA1B,CAA8BJ,OAA9B,EAAuCQ,GAAvC,CAA2C;AAC/CC,QAAAA,QAAQ,EAAE,EADqC;AAE/CC,QAAAA,KAAK,EAAE,EAFwC;AAG/CC,QAAAA,QAAQ,EAAE;AAHqC,OAA3C,EAIH;AAAEC,QAAAA,KAAK,EAAE;AAAT,OAJG,CAAN;AAKA,YAAMf,UAAU,CAACC,GAAD,EAAMC,GAAN,CAAhB;AACD,KAPD,MAOO;AACLA,MAAAA,GAAG,CAACc,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,QAAAA,IAAI,EAAEX,GAAG,CAACW,IAAJ;AAAR,OAArB;AACD;AACF,GAZD,CAYE,OAAOC,KAAP,EAAc;AACdd,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCa,KAAtC;AACAjB,IAAAA,GAAG,CAACe,IAAJ,CAAS;AAAEE,MAAAA;AAAF,KAAT;AACD,GAlBoC,CAmBrC;AACA;AACA;AACA;AACA;AACA;AACA;;AACD,CA1BD;;AA4BA,eAAenB,UAAf","sourcesContent":["import db from '../../lib/db';\n\nconst getComment = async (req, res) => {\n  const { post_id } = req.query;\n  console.log('getting comments for ' + post_id);\n  try {\n    const doc = await db.collection('comments').doc(post_id).get();\n    if (!doc.exists) {\n      await db.collection('comments').doc(post_id).set({\n        children: [],\n        value: '',\n        parentId: null,\n      }, { merge: true });\n      await getComment(req, res);\n    } else {\n      res.status(200).json({ data: doc.data() });\n    }\n  } catch (error) {\n    console.log('Error getting comments', error);\n    res.json({ error })\n  }\n  // db.collection('comments').doc(id).get()\n  //   .then((doc) => {\n  // })\n  // .catch((error) => {\n  //   console.log('Error getting comments', error);\n  //   res.json({ error })\n  // });\n}\n\nexport default getComment;"]},"metadata":{},"sourceType":"module"}