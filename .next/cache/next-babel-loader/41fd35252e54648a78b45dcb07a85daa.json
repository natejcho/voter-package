{"ast":null,"code":"import db from '../../lib/db';\n\nconst getComment = (res, id) => {\n  db.collection('comments').doc(id).get().then(doc => {\n    if (!doc.exists) {\n      db.collection('comments').doc('id');\n      getComment(res, id);\n    } else {\n      res.status(200).json({\n        data: doc.data()\n      });\n    }\n  }).catch(error => {\n    console.log('Error getting comments', error);\n    res.json({\n      error\n    });\n  });\n};\n\nexport default (async (req, res) => {\n  console.log('getting comments for ' + req.query.post_id);\n  getComment(res, req.query.post_id);\n});","map":{"version":3,"sources":["/Users/nathanielcho/Projects/voter-package/pages/api/comments.js"],"names":["db","getComment","res","id","collection","doc","get","then","exists","status","json","data","catch","error","console","log","req","query","post_id"],"mappings":"AAAA,OAAOA,EAAP,MAAe,cAAf;;AAEA,MAAMC,UAAU,GAAG,CAACC,GAAD,EAAMC,EAAN,KAAa;AAC9BH,EAAAA,EAAE,CAACI,UAAH,CAAc,UAAd,EAA0BC,GAA1B,CAA8BF,EAA9B,EAAkCG,GAAlC,GACGC,IADH,CACSF,GAAD,IAAS;AACb,QAAI,CAACA,GAAG,CAACG,MAAT,EAAiB;AACfR,MAAAA,EAAE,CAACI,UAAH,CAAc,UAAd,EAA0BC,GAA1B,CAA8B,IAA9B;AACAJ,MAAAA,UAAU,CAACC,GAAD,EAAMC,EAAN,CAAV;AACD,KAHD,MAGO;AACLD,MAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,QAAAA,IAAI,EAAEN,GAAG,CAACM,IAAJ;AAAR,OAArB;AACD;AACF,GARH,EASGC,KATH,CASUC,KAAD,IAAW;AAChBC,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCF,KAAtC;AACAX,IAAAA,GAAG,CAACQ,IAAJ,CAAS;AAAEG,MAAAA;AAAF,KAAT;AACD,GAZH;AAaD,CAdD;;AAgBA,gBAAe,OAAOG,GAAP,EAAYd,GAAZ,KAAoB;AACjCY,EAAAA,OAAO,CAACC,GAAR,CAAY,0BAA0BC,GAAG,CAACC,KAAJ,CAAUC,OAAhD;AACAjB,EAAAA,UAAU,CAACC,GAAD,EAAMc,GAAG,CAACC,KAAJ,CAAUC,OAAhB,CAAV;AACD,CAHD","sourcesContent":["import db from '../../lib/db';\n\nconst getComment = (res, id) => {\n  db.collection('comments').doc(id).get()\n    .then((doc) => {\n      if (!doc.exists) {\n        db.collection('comments').doc('id');\n        getComment(res, id);\n      } else {\n        res.status(200).json({ data: doc.data() });\n      }\n    })\n    .catch((error) => {\n      console.log('Error getting comments', error);\n      res.json({ error })\n    });\n}\n\nexport default async (req, res) => {\n  console.log('getting comments for ' + req.query.post_id);\n  getComment(res, req.query.post_id);\n}"]},"metadata":{},"sourceType":"module"}